
<div class="row">
  <div class="col">
  	<div class="row">
  		<div class="col h4"><%= c.title %></div>
    </div>
  	<div class="row">
  		<div class="col h6"><%= c.starts_at.strftime '%Y/%m/%d' %> - <%= c.ends_at.strftime '%Y/%m/%d' %></div>
    </div>
  </div>   		
	<div class="col-2 d-flex justify-content-end">
	  <a href="/contest/<%= c.id %>" class="text-muted">more</a>
  </div>
</div>
<div class="row mt-3">
	<div class="col-10"><%= c.description.html_safe %></div>
</div>

<% if c.starts_at>Time.now %>
  <div class="row my-3">
  	<div class="col d-flex justify-content-center fw-bold" id="countdown-<%= c.id %>">
    </div>		
  </div>
	<script>	
		(function() {
			var countDownDate = new Date("<%= c.starts_at %>").getTime();
	 		var x = setInterval(function() {
  		var now = new Date().getTime();
   	 	var distance = countDownDate - now;
  		var days = Math.floor(distance / (1000 * 60 * 60 * 24));
  		var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  		var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  		var seconds = Math.floor((distance % (1000 * 60)) / 1000);

  		document.getElementById("countdown-<%= c.id %>").innerHTML = days + " days " + hours + " hours "+ minutes + " minutes " + seconds + " seconds ";

    	if (distance < 0) { learInterval(x); document.getElementById("countdown-<%= c.id %>").innerHTML = ""; }
		}, 1000);
	 })();
</script>  	
<% end %>

<% if c.starts_at<Time.now %>
	<div class="row">
	  <div class="col p-3">
	    <div class="border border-4 border-dark rounded-3 text-center bg-dark text-white h6 fs-italic p-2"><%= r.nil? ? c.observations.count : Participation.where(region_id: r.id, contest_id: c.id).first.observations.count %><br/>Sightings</div> 
	  </div>
	  <div class="col p-3">
	    <div class="border border-4 border-dark rounded-3 text-center bg-dark text-white h6 fs-italic p-2"><%= r.nil? ? c.identifications_count : r.identifications_count %><br/>Identifications</div> 
	  </div>
	  <div class="col p-3">
	    <div class="border border-4 border-dark rounded-3 text-center bg-dark text-white h6 fs-italic p-2"><%= r.nil? ? c.species_count : r.species_count %><br/>Species</div> 
	  </div>
	  <div class="col p-3">
	    <div class="border border-4 border-dark rounded-3 text-center bg-dark text-white h6 fs-italic p-2"><%= r.nil? ? c.participants_count : r.participants_count %><br/>Participants</div> 
	  </div>
	</div>
<% end %>
